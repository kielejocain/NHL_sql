# NHL Data Codebook

## Schema

Our database consists of four tables: `skaters`, `skaterstats`, `goalies`, and `goaliestats`.  The `skaters` and `goalies` tables consist of biographical information of players that played at least one game in the NHL between the 1997-98 and 2013-2014 seasons.  They are keyed by the `nhl_num` column, which contains the unique 7-digit number generated by the NHL for each player in the league.  This column acts as a foreign key in the `skaterstats` and `goaliestats` tables, where seasonwide statistics are kept; one observation in a table represents the statistics for one player over one season.

## Biographical Tables

The `skaters` and `goalies` tables contain the same columns, and could conceivably be combined.

`first_name`

- character (varying)
- The player's legal given name

`last_name`

- character (varying)
- The player's legal surname

`nhl_num`

- integer
- The unique 7-digit number the NHL assigns to each player (NHL number)
 
`player_position`

- character (varying)
- values: `C`, `D`, `G`, `L`, `R`
- The position played according to the NHL (though this can vary widely within a season or even a game).  `C` = center, `D` = defenseman, `G` = goaltender, `L` = left winger, `R` = right winger

`birthday`

- date
- The player's legal birthdate

`draft_year`

- integer
- The year in which the player was first selected in the amateur draft

`draft_position`

- integer
- The overall position in the draft where the player was taken.  `1` = first overall

## Skater Statistics

The `skaterstats` table tracks around 50 statistics per player per season.

`nhl_num`

- integer
- The unique 7-digit number the NHL assigns to each player (NHL number)

`season`

- integer
- The season to which the stats in the observation pertain.  `2006` = the 2005-06 season

`team`

- character (varying)
- values: `CBJ`, `PIT`, `DAL`, `CGY`, `WSH`, `PHI`, `FLA`, `TOR`, `WPG`, `CAR`, `ANA`, `TBL`, `STL`, `EDM`, `BUF`, `VAN`, `LAK`, `DET`, `COL`, `BOS`, `PHX`, `MTL`, `OTT`, `NYR`, `SJS`, `NJD`, `NYI`, `CHI`, `NSH`, `ATL`, `MIN`
- The first team roster on which the player appears in that season

`team2`

- character (varying)
- values: (as for `team`)
- The second team roster on which the player appears in that season

`team3`

- character (varying)
- values: (as for `team`)
- The third team roster on which the player appears in that season

`games_played`

- integer
- The number of games in which the player appeared in that season

`goals`

- integer
- The number of goals credited to the player in that season

`assists`

- integer
- The number of assists (primary or secondary) credited to the player in that season

`points`

- integer
- The number of points (goals + assists) credited to the player in that season

`plus_minus`

- integer
- The number of goals scored by the team with the player on the ice without having a man advantage, minus the number of goals conceded by the team with the player on the ice while short-handed

`penalty_minutes`

- integer
- The number of penalty minutes assessed to the player over the course of that season

`pp_goals`

- integer
- The number of goals credited to the player while having a man advantage that season (power play goals)

`pp_points`

- integer
- The number of points credited to the player while having a man advantage that season (power play points)

`sh_goals`

- integer
- The number of goals credited to the player while short-handed that season (short-handed goals)

`sh_points`

- integer
- The number of points credited to the player while short-handed that season (short-handed points)

`gw_goals`

- integer
- The number of (non-shootout) goals credited to the player that were chronologically first in excess of the opposing teams' goals (*e.g.*, the 2nd goal in a 3-1 victory; game-winning goals)

`ot_goals`

- integer
- The number of goals credited to the player that were scored in the overtime period (overtime goals)

`shots`

- integer
- The number of times the player directed the puck toward the net necessitating the opposing goaltender to make a save + the number of goals credited to the player that season

`shot_pct`

- numeric
- The number of goals credited to the player / the number of shots credited (shot percentage)

`en_goals`

- integer
- The number of goals credited to the player that were scored with no opposing goaltender (empty net goals)

`ps_goals`

- integer
- The number of goals credited to the player on a penalty shot (penalty shot goals)

`minors`

- integer
- The number of minor infractions for which the player was assessed a two-minute penalty

`majors`

- integer
- The number of major infractions for which the player was assessed a five-minute penalty

`misconducts`

- integer
- The number of 10-minute misconducts assessed to the player
 
`game_misconducts`

- integer
- The number of game misconducts assessed to the player

`matches`

- integer
- The number of match penalties assessed to the player

`team_goals_for`

- integer
- The number of goals scored by the team with the player on the ice

`team_pp_goals_for`

- integer
- The number of goals scored by the team with the player on the ice and a man advantage

`team_goals_against`

- integer
- The number of goals scored by the opposition with the player on the ice

`team_pp_goals_against`

- integer
- The number of goals scored by the opposition with the player on the ice and short-handed

`hits`

- integer
- The number of body checks delivered by the player that season

`blocked_shots`

- integer
- The number of shots directed on net by the player that were prevented from getting to the net by an opposition player other than the goaltender

`missed_shots`

- integer
- The number of attempts on net by the player that missed the net without interference from the opposition

`giveaways`

- integer
- The number of times the player lost possession of the puck to an opposition player

`takeaways`

- integer
- The number of times the player gained possession of the puck from an opposition player

`faceoff_wins`

- integer
- The number of draws taken by the player that lead to possession by the team

`faceoff_losses`

- integer
- The number of draws taken by the player that lead to possession by the opposition

`so_shots`

- integer
- The number of attempts taken by the player in the shootout (shootout shots)

`so_goals`

- integer
- The number of goals credited to the player in the shootout (shootout goals)

`so_pct`

- numeric
- shootout goals credited to the player / shootout attempts taken by the player (shootout percentage)

`game_deciding_goals`

- integer
- The shootout equivalent of a game-winning goal (cf. `gw_goals`)

`ot_games_played`

- integer
- The number of games in which the player appeared during the overtime period

`ot_assists`

- integer
- The number of assists credited to the player during the overtime period

`ot_points`

- integer
- The number of points credited to the player during the overtime period

`es_toi`

- integer
- The amount of time (in seconds) the player spent on the ice in even strength situations (even strength time on ice)

`sh_toi`

- integer
- The amount of time (in seconds) the player spent on the ice in short-handed situations (short-handed time on ice)

`pp_toi`

- integer
- The amount of time (in seconds) the player spent on the ice in man advantage situations (power play time on ice)

`toi`

- integer
- The amount of time (in seconds) the player spent on the ice in all situations (time on ice)

